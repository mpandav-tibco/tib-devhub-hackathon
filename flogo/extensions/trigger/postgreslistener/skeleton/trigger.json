{
  "name": "postgreslistener",
  "type": "flogo:trigger",
  "title": "PostgreSQL Listener",
  "version": "0.2.0",
  "author": "Milind Pandav",
  "description": "A PostgreSQL listenertrigger that listens for PostgreSQL NOTIFY messages with enhanced logging, OpenTelemetry tracing, and enterprise-grade connection management",
  "settings": [
    {
      "name": "host",
      "type": "string",
      "required": true,
      "display": {
        "name": "Host",
        "description": "PostgreSQL server host",
        "appPropertySupport": true
      }
    },
    {
      "name": "port",
      "type": "integer",
      "required": true,
      "value": 5432,
      "display": {
        "name": "Port",
        "description": "PostgreSQL server port",
        "appPropertySupport": true
      }
    },
    {
      "name": "user",
      "type": "string",
      "required": true,
      "display": {
        "name": "User",
        "description": "Database user",
        "appPropertySupport": true
      }
    },
    {
      "name": "password",
      "type": "string",
      "required": true,
      "display": {
        "name": "Password",
        "description": "Database password",
        "type": "password",
        "appPropertySupport": true
      }
    },
    {
      "name": "databaseName",
      "type": "string",
      "required": true,
      "display": {
        "name": "Database Name",
        "description": "Database name",
        "appPropertySupport": true
      }
    },
    {
      "name": "sslMode",
      "type": "string",
      "value": "disable",
      "allowed": ["disable", "require", "verify-ca", "verify-full"],
      "display": {
        "name": "SSL Mode",
        "description": "SSL connection mode",
        "type": "dropdown"
      }
    },
    {
      "name": "tlsConfig",
      "type": "boolean",
      "value": false,
      "display": {
        "name": "Enable TLS Configuration",
        "description": "Enable advanced TLS certificate configuration"
      }
    },
    {
      "name": "tlsMode",
      "type": "string",
      "value": "VerifyCA",
      "allowed": ["VerifyCA", "VerifyFull"],
      "display": {
        "name": "TLS Mode",
        "description": "TLS verification mode",
        "type": "dropdown",
        "visible": "=$property[\"tlsConfig\"] == true"
      }
    },
    {
      "name": "cacert",
      "type": "string",
      "display": {
        "name": "CA Certificate",
        "description": "CA certificate (base64 encoded)",
        "type": "textbox",
        "visible": "=$property[\"tlsConfig\"] == true"
      }
    },
    {
      "name": "clientcert",
      "type": "string",
      "display": {
        "name": "Client Certificate",
        "description": "Client certificate (base64 encoded)",
        "type": "textbox",
        "visible": "=$property[\"tlsConfig\"] == true"
      }
    },
    {
      "name": "clientkey",
      "type": "string",
      "display": {
        "name": "Client Key",
        "description": "Client key (base64 encoded)",
        "type": "textbox",
        "visible": "=$property[\"tlsConfig\"] == true"
      }
    },
    {
      "name": "connectionTimeout",
      "type": "integer",
      "value": 30,
      "display": {
        "name": "Connection Timeout",
        "description": "Connection timeout in seconds"
      }
    },
    {
      "name": "maxConnRetryAttempts",
      "type": "integer",
      "value": 3,
      "display": {
        "name": "Max Connection Retry Attempts",
        "description": "Maximum number of connection retry attempts"
      }
    },
    {
      "name": "connectionRetryDelay",
      "type": "integer",
      "value": 5,
      "display": {
        "name": "Connection Retry Delay",
        "description": "Delay between connection retries in seconds"
      }
    }
  ],
  "handler": {
    "settings": [
      {
        "name": "channel",
        "type": "string",
        "required": true,
        "display": {
          "name": "Channel Name",
          "appPropertySupport": true,
          "description": "The PostgreSQL channel name to listen on (e.g., 'my_channel')"
        }
      }
    ]
  },
  "outputs": [
    {
      "name": "payload",
      "type": "string"
    }
  ],
  "ref": "github.com/mpandav/trigger/postgreslistener"
}
